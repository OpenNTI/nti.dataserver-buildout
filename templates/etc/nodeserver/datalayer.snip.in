<script>
dataLayer = [{
    appName: '<[cfg:appName]>',
    appId: '<[cfg:appId]>',
    appVersion: '<[cfg:appVersion]>',
    appInstallerId: navigator.standalone ? 'homescreen':'browser',
    locale: '<[cfg:locale]>',
    siteName: '<[cfg:siteName]>',
    siteTitle: '<[cfg:siteTitle]>',
    userId: '<[cfg:userId]>',
}];
addEventListener('user-set', function (e) {
    var user = e.detail;
    console.log(user);
    // Convention here is that `_` signifies PII
    // and thus needs to be handled appropriately.
    dataLayer.push({
        event: 'user-set',
        _name: user.realname,
        _email: user.email,
	_firstName: user.NonI18NFirstName,
	_lastName: user.NonI18NLastName,
	createdTime: user.getCreatedTime().getTime(),
	lastActiveTime: user.getLastSeenTime().getTime()
    });
});
</script>
