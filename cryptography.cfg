[buildout]
extends =
	openssl.cfg

parts =
	libffi

[libffi]
recipe = hexagonit.recipe.cmmi
version = 3.2.1
url = ftp://sourceware.org/pub/libffi/libffi-${:version}.tar.gz
keep-compile-dir = true

[libffi_env]
libdir = lib
LDFLAGS = -L${libffi:prefix}/${:libdir}
CFLAGS = -I${libffi:prefix}/lib/libffi-${libffi:version}/include

[libffi_env:macosx]
libdir = lib

[libffi_env:linux]
libdir = lib64

[cryptography_env]
ARCHFLAGS = -arch x86_64
LDFLAGS = -L${openssl:prefix}/lib ${libffi_env:LDFLAGS}
CFLAGS = -I${openssl:prefix}/include ${libffi_env:CFLAGS}
 
[cryptography]
recipe = zc.recipe.egg:custom
environment = cryptography_env
force = true
egg = cryptography

