[buildout]
extends =
	openssl.cfg

[libffi]
recipe = hexagonit.recipe.cmmi
url = ftp://sourceware.org/pub/libffi/libffi-3.2.1.tar.gz
make-options =
	prefix=${buildout:root-directory}/parts/libffi
	libdir=${buildout:root-directory}/parts/libffi/lib
keep-compile-dir = true

[libffi_env]
CFLAGS = -I${libffi:prefix}/include
LDFLAGS = -L${libffi:prefix}/lib

[cryptography_env]
ARCHFLAGS = -arch x86_64
CFLAGS = -I${openssl:prefix}/include ${libffi:prefix}/include
LDFLAGS = -L${openssl:prefix}/lib ${libffi:prefix}/lib
 
[cryptography]
recipe = zc.recipe.egg:custom
include-dirs =
	${libffi:prefix}/include
library-dirs =
	${libffi:prefix}/lib
environment = cryptography_env
force = true
egg = cryptography

