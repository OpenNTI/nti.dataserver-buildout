[buildout]
extends = base_environment.cfg
parts +=
	  zeo_dirs
	  zeo

[zeo_dirs]
recipe = z3c.recipe.mkdir
paths = data/data.fs.blobs
mode = 0700

[zeo]
name = Dataserver
recipe = zc.zodbrecipes:server
clientPipe = ${buildout:directory}/var/zeosocket
dataFile = ${buildout:directory}/data/data.fs
logFile = ${buildout:directory}/var/log/zeo.log
blobDir = ${zeo_dirs:paths}
zeo.conf =
		%import zc.zlibstorage
		<zeo>
			address ${:clientPipe}
		</zeo>
		<serverzlibstorage>
			<filestorage 1>
				path ${:dataFile}
				blob-dir ${:blobDir}
				pack-gc false
			</filestorage>
		</serverzlibstorage>

		<eventlog>
			<logfile>
				path ${:logFile}
				format %%(asctime)s %%(message)s
				level DEBUG
			</logfile>
		</eventlog>
deployment = deployment
